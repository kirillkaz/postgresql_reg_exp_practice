# Данный репозиторий предназначен для изучения регулярных выражений в PostgreSQL.

В нём представлены некоторые задания, которые могут помочь для освоения данной темы

### Задание 1. Извлечение всех email с валидацией домена

Условие:
В таблице messages есть столбец body типа TEXT. Извлеките все email-адреса, встречающиеся в теле, но только те, у которых домен — из списка: gmail.com, yandex.ru, mail.ru.

Требования:

- Нельзя использовать LIKE/ILIKE после извлечения — всё должно быть в одном регулярном выражении
- Email должен соответствовать базовой структуре: local-part@domain

Пример данных:

```text
"Contact me at john.doe@gmail.com or support@yandex.ru. Also admin@evil.com and user@mail.ru."
```

Ожидаемый результат (одна строка на email):

1. john.doe@gmail.com
2. support@yandex.ru
3. user@mail.ru

### Задание 2. Замена всех чисел в тексте на [NUM], но только если они не часть URL или email

Условие:
В столбце content таблицы posts замените все отдельно стоящие числа на [NUM], но не трогайте числа, которые:

- Внутри email (например, user123@gmail.com)
- Внутри URL (например, https://site.com/page2)
- Являются частью слова (например, win32, B747)

Пример:
```text
"Заказ №4567 от 2025 года. Ссылка: https://shop.ru/item123. Email: admin2@site.com. Цена: 999 рублей."
```

Ожидаемый результат:
```text
"Заказ №[NUM] от [NUM] года. Ссылка: https://shop.ru/item123. Email: admin2@site.com. Цена: [NUM] рублей."
```

### Задание 3. Извлечь все даты в форматах DD.MM.YYYY, YYYY-MM-DD и Month DD, YYYY — одним регулярным выражением
Условие:
В столбце text таблицы documents найдите все даты, соответствующие хотя бы одному из форматов:

- DD.MM.YYYY (например, 05.12.2024)
- YYYY-MM-DD (например, 2024-12-05)
- Month DD, YYYY (например, December 05, 2024 или Dec 5, 2024 — с любым регистром и сокращениями)

Требование:

Используйте одно регулярное выражение с чередованием (|) и захватывающими группами. Верните все совпадения через regexp_matches(..., 'g').

### Задание 4: Валидация пароля через регулярное выражение
Условие:
Напишите запрос, который возвращает true/false, если строка в столбце password соответствует всем условиям:

- Минимум 8 символов
- Хотя бы одна заглавная латинская буква
- Хотя бы одна строчная латинская буква
- Хотя бы одна цифра
- Хотя бы один спецсимвол из !@#$%^&*()_+-=[]{}|;:,.<>?
- Не содержит пробелов
- Не содержит последовательностей из 3+ одинаковых символов подряд (например, aaa, 111, ### — запрещены)

Примеры:
- Passw0rd! - V
- MyP@ss111 - X (три единицы)
- weak - X (короткий)
- NoSpecial1 - X (нет спецсимвола)
- Has Space1! - X (есть пробел)

### Задание 5: Парсинг веб-серверных логов (Common Log Format)

В таблице server_logs есть столбец log_line типа TEXT, содержащий строки логов веб-сервера в формате Common Log Format:
```text
127.0.0.1 - - [17/May/2024:10:30:45 +0300] "GET /index.html HTTP/1.1" 200 2326
```

Напишите запрос, который извлекает из каждой строки лога отдельные поля:

- ip — IP-адрес клиента
- datetime — дата и время в формате YYYY-MM-DD HH:MI:SS (без часового пояса)
- method — HTTP-метод (GET, POST и т.д.)
- path — запрошенный путь (например, /index.html)
- status — HTTP-статус (код ответа)
- size — размер ответа в байтах

Требования:

- Используйте одно регулярное выражение с захватывающими группами
- Преобразуйте дату из формата [17/May/2024:10:30:45 +0300] в 2024-05-17 10:30:45
- Игнорируйте строки, не соответствующие формату
- Не используйте split_part или позиционные функции — только регулярки

### Задание 6: Разбор списка хештегов из постов

Условие:
В таблице social_posts есть столбец content типа TEXT — текст поста из соцсети.
В тексте могут встречаться хештеги — слова, начинающиеся с #, состоящие из букв, цифр и нижних подчёркиваний, без пробелов и знаков препинания внутри.

Задача:
Извлеките все уникальные хештеги из всех постов, приведите их к нижнему регистру, и верните список в алфавитном порядке.

Правила хештега:

- Начинается с #
- После # — одна или более букв/цифр/нижних подчёркиваний
- Не содержит пробелов, точек, запятых, дефисов и т.д. внутри
- Может находиться в любом месте текста — начало, середина, конец
- Может быть несколько хештегов в одном посте

Требования:

- Используйте regexp_split_to_table для разбиения текста на «кандидаты»
- Отфильтруйте только валидные хештеги
- Уберите #, приведите к нижнему регистру
- Верните DISTINCT + ORDER BY

Пример результата:
```text
ai
back_end
beginner
data_engineer
databasedesign
helloworld
machinelearning
onetag
postgresql
sql
sql2024
tag123
version_3_14
```